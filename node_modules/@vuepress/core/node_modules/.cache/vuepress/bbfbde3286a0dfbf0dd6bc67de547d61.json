{"remainingRequest":"/Applications/personal-note/blog/node_modules/babel-loader/lib/index.js??ref--3-1!/Applications/personal-note/blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/personal-note/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/personal-note/blog/docs/.vuepress/components/one-tree-select.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/personal-note/blog/docs/.vuepress/components/one-tree-select.vue","mtime":1668505835654},{"path":"/Applications/personal-note/blog/node_modules/cache-loader/dist/cjs.js","mtime":1667818948286},{"path":"/Applications/personal-note/blog/node_modules/babel-loader/lib/index.js","mtime":1667818948295},{"path":"/Applications/personal-note/blog/node_modules/cache-loader/dist/cjs.js","mtime":1667818948286},{"path":"/Applications/personal-note/blog/node_modules/vue-loader/lib/index.js","mtime":1668421637991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdvbmUtdHJlZS1zZWxlY3QnLAogIHByb3BzOiB7CiAgICAvLyDphY3nva7pobkKICAgIHByb3BzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB2YWx1ZTogJ2lkJywKICAgICAgICAgIC8vIElE5a2X5q615ZCNCiAgICAgICAgICBsYWJlbDogJ2xhYmVsJywKICAgICAgICAgIC8vIOaYvuekuuWQjeensAogICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicgLy8g5a2Q57qn5a2X5q615ZCNCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKCiAgICAvLyDpgInpobnliJfooajmlbDmja4o5qCR5b2i57uT5p6E55qE5a+56LGh5pWw57uEKQogICAgb3B0aW9uczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4i+aLieWIneWni+WAvAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIC8vIOWPr+a4heepuumAiemhuQogICAgY2xlYXJhYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICAvLyDmmK/lkKbnpoHnlKgKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5Y2g5L2N56ym5Y+3CiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgLy8g5piv5ZCm5pS26LW3CiAgICBhY2NvcmRpb246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZVRpdGxlOiAnJywKICAgICAgLy8g5LiL5ouJ5qGG5pi+56S65ZCN56ewCiAgICAgIHZhbHVlSWQ6IG51bGwsCiAgICAgIC8vIOWIneWni0lkCiAgICAgIGRlZmF1bHRFeHBhbmRlZEtleTogW10gLy8g6buY6K6k5bGV5byA6IqC54K55pWw57uECiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnZhbHVlSWQgPSB0aGlzLnZhbHVlLAogICAgLy8g5Yid5aeL5YC8CiAgICB0aGlzLmluaXRIYW5kbGUoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMlgogICAgaW5pdEhhbmRsZSgpIHsKICAgICAgdGhpcy52YWx1ZUlkID0gdGhpcy52YWx1ZTsKICAgICAgaWYgKHRoaXMudmFsdWVJZCAmJiB0aGlzLm9wdGlvbnMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMudmFsdWVUaXRsZSA9IHRoaXMuJHJlZnMuc2VsZWN0VHJlZS5nZXROb2RlKHRoaXMudmFsdWVJZCkuZGF0YVt0aGlzLnByb3BzLmxhYmVsXTsgLy8g5Yid5aeL5YyW5pi+56S6bGFiZWwKICAgICAgICAgIHRoaXMuJHJlZnMuc2VsZWN0VHJlZS5zZXRDdXJyZW50S2V5KHRoaXMudmFsdWVJZCk7IC8vIOiuvue9rum7mOiupOmAieS4rQogICAgICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXkgPSBbdGhpcy52YWx1ZUlkXTsgLy8g6K6+572u6buY6K6k5bGV5byACiAgICAgICAgICB0aGlzLiRlbWl0KCdnZXRWYWx1ZScsIHRoaXMuJHJlZnMuc2VsZWN0VHJlZS5nZXROb2RlKHRoaXMudmFsdWVJZCkuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5pbml0U2Nyb2xsKCk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW5rua5Yqo5p2hCiAgICBpbml0U2Nyb2xsKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IHNjcm9sbFdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWwtc2Nyb2xsYmFyIC5lbC1zZWxlY3QtZHJvcGRvd25fX3dyYXAnKVswXTsKICAgICAgICBsZXQgc2Nyb2xsQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVsLXNjcm9sbGJhciAuZWwtc2Nyb2xsYmFyX19iYXInKTsKICAgICAgICBzY3JvbGxXcmFwLnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luOiAwcHg7IG1heC1oZWlnaHQ6IG5vbmU7IG92ZXJmbG93OiBoaWRkZW47JzsKICAgICAgICBzY3JvbGxCYXIuZm9yRWFjaChlbCA9PiBlbC5zdHlsZS53aWR0aCA9IDApOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliIfmjaLpgInpobkKICAgIGhhbmRsZU5vZGVDbGljayhub2RlKSB7CiAgICAgIHRoaXMudmFsdWVUaXRsZSA9IG5vZGVbdGhpcy5wcm9wcy5sYWJlbF07IC8vIOiuvue9rmxhYmVsCiAgICAgIHRoaXMudmFsdWVJZCA9IG5vZGVbdGhpcy5wcm9wcy5pZF07IC8vIOiuvue9rmlkCiAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5ID0gW107CiAgICAgIHRoaXMuJGVtaXQoJ2dldFZhbHVlJywgbm9kZSk7CiAgICAgIHRoaXMuJHJlZnMuZWxTZWxlY3QudmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOa4hemZpOmAieS4rQogICAgY2xlYXJIYW5kbGUoKSB7CiAgICAgIHRoaXMudmFsdWVUaXRsZSA9ICcnOwogICAgICB0aGlzLnZhbHVlSWQgPSBudWxsOwogICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleSA9IFtdOwogICAgICB0aGlzLmNsZWFyU2VsZWN0ZWQoKTsKICAgICAgdGhpcy4kZW1pdCgnZ2V0VmFsdWUnLCBudWxsKTsKICAgIH0sCiAgICAvLyDmuIXnqbrpgInkuK3moLflvI8KICAgIGNsZWFyU2VsZWN0ZWQoKSB7CiAgICAgIGxldCBhbGxOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3RyZWUtb3B0aW9uIC5lbC10cmVlLW5vZGUnKTsKICAgICAgYWxsTm9kZS5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jdXJyZW50JykpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9wdGlvbnMoKSB7CiAgICAgIHRoaXMudmFsdWVJZCA9IHRoaXMudmFsdWU7CiAgICAgIHRoaXMuaW5pdEhhbmRsZSgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AA0BA;EACAA;EACAC;IACA;IACAA;MACAC;MACAC;QACA;UACAC;UAAA;UACAC;UAAA;UACAC;QACA;MACA;IACA;;IACA;IACAC;MACAL;MACAC;QACA;MACA;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAK;MACAN;MACAC;IACA;IACA;IACAM;MACAP;MACAC;IACA;IACA;IACAO;MACAR;MACAC;IACA;IACA;IACAQ;MACAT;MACAC;IACA;EACA;EACAS;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IAAA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA;QACA;QACAC;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACAC;IACA;EACA;EACAC;IACAnB;MACA;MACA;IACA;EACA;AACA","names":["name","props","type","default","value","label","children","options","clearable","disabled","placeholder","accordion","data","valueTitle","valueId","defaultExpandedKey","mounted","methods","initHandle","initScroll","scrollWrap","scrollBar","handleNodeClick","clearHandle","clearSelected","allNode","watch"],"sourceRoot":"docs/.vuepress/components","sources":["one-tree-select.vue"],"sourcesContent":["<template>\n  <el-select\n    ref=\"elSelect\"\n    :value=\"valueTitle\"\n    :disabled=\"disabled\"\n    :clearable=\"clearable\"\n    :placeholder=\"placeholder\"\n    @clear=\"clearHandle\"\n  >\n    <el-option :value=\"valueTitle\" :label=\"valueTitle\" class=\"options\">\n      <el-tree\n        id=\"tree-option\"\n        ref=\"selectTree\"\n        :props=\"props\"\n        :data=\"options\"\n        :accordion=\"accordion\"\n        :node-key=\"props.value\"\n        :default-expanded-keys=\"defaultExpandedKey\"\n        @node-click=\"handleNodeClick\"\n      >\n      </el-tree>\n    </el-option>\n  </el-select>\n</template>\n\n<script>\nexport default {\n  name: 'one-tree-select',\n  props: {\n    // 配置项\n    props: {\n      type: Object,\n      default: () => {\n        return {\n          value: 'id', // ID字段名\n          label: 'label', // 显示名称\n          children: 'children', // 子级字段名\n        }\n      },\n    },\n    // 选项列表数据(树形结构的对象数组)\n    options: {\n      type: Array,\n      default: () => {\n        return []\n      },\n    },\n    // 下拉初始值\n    value: {\n      type: String,\n      default: '',\n    },\n    // 可清空选项\n    clearable: {\n      type: Boolean,\n      default: true,\n    },\n    // 是否禁用\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    // 占位符号\n    placeholder: {\n      type: String,\n      default: '',\n    },\n    // 是否收起\n    accordion: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      valueTitle: '', // 下拉框显示名称\n      valueId: null, // 初始Id\n      defaultExpandedKey: [], // 默认展开节点数组\n    }\n  },\n  mounted() {\n    this.valueId = this.value, // 初始值\n    this.initHandle()\n  },\n  methods: {\n    // 初始化\n    initHandle() {\n      this.valueId = this.value\n      if (this.valueId && this.options.length > 0) {\n        this.$nextTick(function () {\n          this.valueTitle = this.$refs.selectTree.getNode(this.valueId).data[this.props.label] // 初始化显示label\n          this.$refs.selectTree.setCurrentKey(this.valueId) // 设置默认选中\n          this.defaultExpandedKey = [this.valueId] // 设置默认展开\n          this.$emit('getValue',this.$refs.selectTree.getNode(this.valueId).data)\n        })\n      }\n      this.initScroll()\n    },\n\n    // 初始化滚动条\n    initScroll() {\n      this.$nextTick(() => {\n        let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]\n        let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')\n        scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'\n        scrollBar.forEach((el) => (el.style.width = 0))\n      })\n    },\n    // 切换选项\n    handleNodeClick(node) {\n      this.valueTitle = node[this.props.label] // 设置label\n      this.valueId = node[this.props.id] // 设置id\n      this.defaultExpandedKey = []\n      this.$emit('getValue', node)\n      this.$refs.elSelect.visible = false\n    },\n    // 清除选中\n    clearHandle() {\n      this.valueTitle = ''\n      this.valueId = null\n      this.defaultExpandedKey = []\n      this.clearSelected()\n      this.$emit('getValue', null)\n    },\n    // 清空选中样式\n    clearSelected() {\n      let allNode = document.querySelectorAll('#tree-option .el-tree-node')\n      allNode.forEach((element) => element.classList.remove('is-current'))\n    },\n  },\n  watch: {\n    options() {\n      this.valueId = this.value\n      this.initHandle()\n    },\n  },\n}\n</script>\n<style scoped>\n.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {\n  height: auto;\n  max-height: 274px;\n  padding: 0;\n  overflow: hidden;\n  overflow-y: auto;\n}\n.el-select-dropdown__item.selected {\n  font-weight: normal;\n}\nul li >>> .el-tree .el-tree-node__content {\n  height: auto;\n  padding: 0 20px;\n}\n.el-tree-node__label {\n  font-weight: normal;\n}\n.el-tree >>> .is-current .el-tree-node__label {\n  color: #409eff;\n  font-weight: 700;\n}\n.el-tree >>> .is-current .el-tree-node__children .el-tree-node__label {\n  color: #606266;\n  font-weight: normal;\n}\n</style>"]}]}